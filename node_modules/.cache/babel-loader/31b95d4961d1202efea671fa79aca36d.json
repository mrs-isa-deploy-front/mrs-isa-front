{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"overflow-scrolling\": \"auto\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-8\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"col-3 justify-content-right\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createStaticVNode(\"<option selected>Sortiraj po</option><option value=\\\"1\\\">Datum</option><option value=\\\"2\\\">Trajanja</option><option value=\\\"3\\\">Naziv</option><option value=\\\"4\\\">Cena</option>\", 5);\n\nconst _hoisted_10 = [_hoisted_5];\nconst _hoisted_11 = {\n  class: \"d-flex justify-content-center\",\n  \"aria-label\": \"Page navigation example\"\n};\nconst _hoisted_12 = {\n  class: \"pagination\"\n};\nconst _hoisted_13 = {\n  class: \"page-item\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"aria-hidden\": \"true\"\n}, \"«\", -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = {\n  class: \"page-item\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"page-item\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"page-link\",\n  disabled: \"\"\n}, \"...\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = {\n  class: \"page-item\"\n};\n\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"page-item\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"page-link\",\n  disabled: \"\"\n}, \"...\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_20 = {\n  class: \"page-item\"\n};\nconst _hoisted_21 = {\n  class: \"page-item\"\n};\n\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"aria-hidden\": \"true\"\n}, \"»\", -1\n/* HOISTED */\n);\n\nconst _hoisted_23 = [_hoisted_22];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_clientHeader = _resolveComponent(\"clientHeader\");\n\n  const _component_clientReservationHistoryList = _resolveComponent(\"clientReservationHistoryList\");\n\n  const _component_pagination_component = _resolveComponent(\"pagination-component\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_clientHeader), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"select\", {\n    id: \"sortBy\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.sortList && $options.sortList(...args)),\n    class: \"form-select\",\n    \"aria-label\": \"Default select\"\n  }, _hoisted_10, 32\n  /* HYDRATE_EVENTS */\n  )])]), _createElementVNode(\"div\", null, [(_openBlock(), _createBlock(_component_clientReservationHistoryList, {\n    onReviewed: $options.itemReviewed,\n    key: $data.myKey,\n    numToDisplay: $data.numberOfElementsForDisplay,\n    from: $data.fromElement,\n    cottagesHistory: $data.cottageReservationHistory\n  }, null, 8\n  /* PROPS */\n  , [\"onReviewed\", \"numToDisplay\", \"from\", \"cottagesHistory\"]))]), _createVNode(_component_pagination_component, {\n    fromElement: \"\",\n    numberOfElements: _ctx.listLength,\n    onPagination: $options.fromUntilElement,\n    class: \"d-flex justify-content-center\"\n  }, null, 8\n  /* PROPS */\n  , [\"numberOfElements\", \"onPagination\"]), _createElementVNode(\"nav\", _hoisted_11, [_createElementVNode(\"ul\", _hoisted_12, [_createElementVNode(\"li\", _hoisted_13, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.makePreviousLink && $options.makePreviousLink(...args)),\n    \"aria-label\": \"Previous\"\n  }, _hoisted_15)]), _createElementVNode(\"li\", _hoisted_16, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.makeFirstLink && $options.makeFirstLink(...args))\n  }, \"1\")]), _hoisted_17, _createElementVNode(\"li\", _hoisted_18, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.makeMiddleLink && $options.makeMiddleLink(...args))\n  }, _toDisplayString($options.makeMiddleNumber()), 1\n  /* TEXT */\n  )]), _hoisted_19, _createElementVNode(\"li\", _hoisted_20, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.makeLastLink && $options.makeLastLink(...args))\n  }, _toDisplayString($options.makeLastNumber()), 1\n  /* TEXT */\n  )]), _createElementVNode(\"li\", _hoisted_21, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.makeNextLink && $options.makeNextLink(...args)),\n    \"aria-label\": \"Next\"\n  }, _hoisted_23)])])])]);\n}","map":{"version":3,"mappings":"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","names":["style","class","_createElementVNode","_hoisted_5","_hoisted_14","disabled","_hoisted_22","_createElementBlock","_createVNode","_component_clientHeader","_hoisted_3","id","onChange","$options","_createBlock","_component_clientReservationHistoryList","onReviewed","key","$data","numToDisplay","from","cottagesHistory","_component_pagination_component","fromElement","numberOfElements","_ctx","onPagination","onClick","_hoisted_17","_hoisted_19"],"sourceRoot":"","sources":["D:\\fakultet\\6.semestar\\MRS\\Projekat\\projekat-login\\projekat\\mrs-isa-front\\src\\components\\clientReservationHistory.vue"],"sourcesContent":["<template>\r\n  <div style=\"overflow-scrolling: auto\">\r\n    <clientHeader></clientHeader>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-8\">\r\n      </div>\r\n      <div class=\"col-3 justify-content-right\" >\r\n        <select id=\"sortBy\" @change=\"sortList\" class=\"form-select\" aria-label=\"Default select\">\r\n          <option selected>Sortiraj po</option>\r\n          <option value=\"1\">Datum</option>\r\n          <option value=\"2\">Trajanja</option>\r\n          <option value=\"3\">Naziv</option>\r\n          <option value=\"4\">Cena</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div>\r\n      <clientReservationHistoryList @reviewed=\"itemReviewed\" :key=\"myKey\" :numToDisplay=\"numberOfElementsForDisplay\" :from=\"fromElement\" :cottagesHistory=\"cottageReservationHistory\"> </clientReservationHistoryList>\r\n    </div>\r\n\r\n    <pagination-component :fromElement=\"\" :numberOfElements=\"listLength\" @pagination=\"fromUntilElement\" class=\"d-flex justify-content-center\"></pagination-component>\r\n\r\n    <nav class=\"d-flex justify-content-center\" aria-label=\"Page navigation example\">\r\n      <ul class=\"pagination\">\r\n        <li class=\"page-item\">\r\n          <button class=\"page-link\" @click=\"makePreviousLink\" aria-label=\"Previous\">\r\n            <span aria-hidden=\"true\">&laquo;</span>\r\n          </button>\r\n        </li>\r\n\r\n        <li class=\"page-item\"><button class=\"page-link\" @click=\"makeFirstLink\">1</button></li>\r\n        <li class=\"page-item\"><button class=\"page-link\" disabled>...</button></li>\r\n        <li class=\"page-item\"><button class=\"page-link\" @click=\"makeMiddleLink\">{{makeMiddleNumber()}}</button></li>\r\n        <li class=\"page-item\"><button class=\"page-link\" disabled>...</button></li>\r\n        <li class=\"page-item\"><button class=\"page-link\" @click=\"makeLastLink\">{{makeLastNumber()}}</button></li>\r\n\r\n        <li class=\"page-item\">\r\n          <button class=\"page-link\" @click=\"makeNextLink\" aria-label=\"Next\">\r\n            <span aria-hidden=\"true\">&raquo;</span>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clientReservationHistoryList from \"@/components/clientReservationHistoryList\";\r\nimport clientHeader from \"@/components/clientHeader\";\r\nimport clientServce from \"@/servieces/ClientServce\";\r\nimport PaginationComponent from \"@/components/paginationComponent\";\r\nexport default {\r\n  name: \"clientReservationHistory\",\r\n  components:{\r\n    PaginationComponent,\r\n    clientReservationHistoryList,\r\n    clientHeader\r\n  },\r\n  props: ['option_link', 'image_path', 'text'],\r\n  created: function() {\r\n    this.fromElement = 0;\r\n    this.type = this.$route.params.type;\r\n    console.log(this.type);\r\n    if (this.type == \"ship\")\r\n      clientServce.getPastShipReservations(JSON.parse(localStorage.user).id)\r\n          .then(response =>{\r\n            this.cottageReservationHistory = response.data;\r\n            this.listLength = this.cottageReservationHistory.length;\r\n          })\r\n    else if (this.type == \"cottage\")\r\n      clientServce.getPastCottageReservations(JSON.parse(localStorage.user).id)\r\n          .then((response) => {\r\n            this.cottageReservationHistory = response.data;\r\n            }\r\n      );\r\n\r\n  },\r\n  methods : {\r\n    fromUntilElement(from, until){\r\n      this.fromElement = from;\r\n      console.log(from);\r\n      console.log(until);\r\n      this.forceRemounting();\r\n    },\r\n    itemReviewed(itemID){\r\n      console.log(itemID);\r\n      for (let offer of this.cottageReservationHistory){\r\n        console.log(offer);\r\n        if (offer.id == itemID){\r\n          offer.reviewed = true;\r\n        }\r\n      }\r\n    },\r\n    forceRemounting(){\r\n      this.myKey -= 1;\r\n    },\r\n    sortList(){\r\n      //axios\r\n      this.fromElement = 0;\r\n      this.forceRemounting();\r\n      console.log(document.getElementById(\"sortBy\").value);\r\n      let sortBy = document.getElementById(\"sortBy\").value;\r\n      if (sortBy == 3 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByName(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      } else if (sortBy == 1 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByDate(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 2 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByDuration(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 4 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByPrice(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 3 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByName(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      } else if (sortBy == 1 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByDate(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 2 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByDuration(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 4 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByPrice(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }\r\n    },\r\n    makeMiddleNumber(){\r\n      let numPages = this.cottageReservationHistory.length / this.numberOfElementsForDisplay;\r\n      return Math.ceil(numPages / 2);\r\n    },\r\n    makeLastNumber(){\r\n      let numPages = this.cottageReservationHistory.length / this.numberOfElementsForDisplay;\r\n      return Math.ceil(numPages);\r\n    },\r\n    makeFirstLink(){\r\n      this.fromElement = 0;\r\n      this.forceRemounting();\r\n    },\r\n    makeMiddleLink(){\r\n      this.fromElement = (this.makeMiddleNumber()-1) * this.numberOfElementsForDisplay;\r\n      this.forceRemounting();\r\n    },\r\n    makeLastLink(){\r\n      this.fromElement = (this.makeLastNumber()-1) * this.numberOfElementsForDisplay;\r\n      this.forceRemounting();\r\n    },\r\n    makePreviousLink(){\r\n      let previousFrom = parseInt(this.fromElement) - parseInt(this.numberOfElementsForDisplay);\r\n      if (previousFrom < 0)\r\n        return\r\n      this.fromElement = previousFrom;\r\n      this.forceRemounting();\r\n    },\r\n    makeNextLink(){\r\n      let nextFrom = parseInt(this.fromElement) + parseInt(this.numberOfElementsForDisplay);\r\n      if (nextFrom > parseInt(this.cottageReservationHistory.length))\r\n        return\r\n      this.fromElement = nextFrom;\r\n      this.forceRemounting();\r\n    },\r\n    checkIfNeedsToBeDisplayed(index){\r\n      let untilElement = parseInt(this.numberOfElementsForDisplay) + parseInt(this.fromElement);\r\n      console.log(index);\r\n      console.log(this.fromElement);\r\n      console.log(untilElement);\r\n      if (index >= this.fromElement && index < untilElement){\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      myKey: 0,\r\n      fromElement: 0,\r\n      cottageReservationHistory: [],\r\n      numberOfElementsForDisplay: 2\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}