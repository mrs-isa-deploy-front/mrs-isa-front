{"ast":null,"code":"import clientReservationHistoryList from \"@/components/clientReservationHistoryList\";\nimport clientHeader from \"@/components/clientHeader\";\nimport clientServce from \"@/servieces/ClientServce\";\nimport PaginationComponent from \"@/components/paginationComponent\";\nexport default {\n  name: \"clientReservationHistory\",\n  components: {\n    PaginationComponent,\n    clientReservationHistoryList,\n    clientHeader\n  },\n  props: ['option_link', 'image_path', 'text'],\n  created: function () {\n    this.fromElement = 0;\n    this.type = this.$route.params.type;\n    console.log(this.type);\n    if (this.type == \"ship\") clientServce.getPastShipReservations(JSON.parse(localStorage.user).id).then(response => {\n      this.cottageReservationHistory = response.data;\n      this.listLength = this.cottageReservationHistory.length;\n    });else if (this.type == \"cottage\") clientServce.getPastCottageReservations(JSON.parse(localStorage.user).id).then(response => {\n      this.cottageReservationHistory = response.data;\n      this.listLength = this.cottageReservationHistory.length;\n    });\n  },\n  methods: {\n    fromUntilElement(from) {\n      this.fromElement = from;\n      this.forceRemounting();\n    },\n\n    itemReviewed(itemID) {\n      console.log(itemID);\n\n      for (let offer of this.cottageReservationHistory) {\n        console.log(offer);\n\n        if (offer.id == itemID) {\n          offer.reviewed = true;\n        }\n      }\n    },\n\n    forceRemounting() {\n      this.myKey -= 1;\n    },\n\n    sortList() {\n      //axios\n      this.fromElement = 0;\n      this.forceRemounting();\n      console.log(document.getElementById(\"sortBy\").value);\n      let sortBy = document.getElementById(\"sortBy\").value;\n\n      if (sortBy == 3 && this.type == \"cottage\") {\n        clientServce.getSortedPastCottageReservationsByName(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 1 && this.type == \"cottage\") {\n        clientServce.getSortedPastCottageReservationsByDate(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 2 && this.type == \"cottage\") {\n        clientServce.getSortedPastCottageReservationsByDuration(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 4 && this.type == \"cottage\") {\n        clientServce.getSortedPastCottageReservationsByPrice(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 3 && this.type == \"ship\") {\n        clientServce.getSortedPastShipReservationsByName(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 1 && this.type == \"ship\") {\n        clientServce.getSortedPastShipReservationsByDate(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 2 && this.type == \"ship\") {\n        clientServce.getSortedPastShipReservationsByDuration(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      } else if (sortBy == 4 && this.type == \"ship\") {\n        clientServce.getSortedPastShipReservationsByPrice(JSON.parse(localStorage.user).id).then(response => {\n          this.cottageReservationHistory = response.data;\n          this.forceRemounting();\n        });\n      }\n    },\n\n    checkIfNeedsToBeDisplayed(index) {\n      let untilElement = parseInt(this.numberOfElementsForDisplay) + parseInt(this.fromElement);\n      console.log(index);\n      console.log(this.fromElement);\n      console.log(untilElement);\n\n      if (index >= this.fromElement && index < untilElement) {\n        return true;\n      }\n\n      return false;\n    }\n\n  },\n\n  data() {\n    return {\n      myKey: 0,\n      fromElement: 0,\n      cottageReservationHistory: [],\n      numberOfElementsForDisplay: 2\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["clientReservationHistoryList","clientHeader","clientServce","PaginationComponent","name","components","props","created","fromElement","type","$route","params","console","log","getPastShipReservations","JSON","parse","localStorage","user","id","then","response","cottageReservationHistory","data","listLength","length","getPastCottageReservations","methods","fromUntilElement","from","forceRemounting","itemReviewed","itemID","offer","reviewed","myKey","sortList","document","getElementById","value","sortBy","getSortedPastCottageReservationsByName","getSortedPastCottageReservationsByDate","getSortedPastCottageReservationsByDuration","getSortedPastCottageReservationsByPrice","getSortedPastShipReservationsByName","getSortedPastShipReservationsByDate","getSortedPastShipReservationsByDuration","getSortedPastShipReservationsByPrice","checkIfNeedsToBeDisplayed","index","untilElement","parseInt","numberOfElementsForDisplay"],"sourceRoot":"","sources":["D:\\fakultet\\6.semestar\\MRS\\Projekat\\projekat-login\\projekat\\mrs-isa-front\\src\\components\\clientReservationHistory.vue"],"sourcesContent":["<template>\r\n  <div style=\"overflow-scrolling: auto\">\r\n    <clientHeader></clientHeader>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-8\">\r\n      </div>\r\n      <div class=\"col-3 justify-content-right\" >\r\n        <select id=\"sortBy\" @change=\"sortList\" class=\"form-select\" aria-label=\"Default select\">\r\n          <option selected>Sortiraj po</option>\r\n          <option value=\"1\">Datum</option>\r\n          <option value=\"2\">Trajanja</option>\r\n          <option value=\"3\">Naziv</option>\r\n          <option value=\"4\">Cena</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div>\r\n      <clientReservationHistoryList @reviewed=\"itemReviewed\" :key=\"myKey\" :numToDisplay=\"numberOfElementsForDisplay\" :from=\"fromElement\" :cottagesHistory=\"cottageReservationHistory\"> </clientReservationHistoryList>\r\n    </div>\r\n\r\n    <pagination-component :numberOfElementsToDisplay=\"numberOfElementsForDisplay\" :fromElement=\"fromElement\" :numberOfElements=\"listLength\" @pagination=\"fromUntilElement\" class=\"d-flex justify-content-center\"></pagination-component>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clientReservationHistoryList from \"@/components/clientReservationHistoryList\";\r\nimport clientHeader from \"@/components/clientHeader\";\r\nimport clientServce from \"@/servieces/ClientServce\";\r\nimport PaginationComponent from \"@/components/paginationComponent\";\r\nexport default {\r\n  name: \"clientReservationHistory\",\r\n  components:{\r\n    PaginationComponent,\r\n    clientReservationHistoryList,\r\n    clientHeader\r\n  },\r\n  props: ['option_link', 'image_path', 'text'],\r\n  created: function() {\r\n    this.fromElement = 0;\r\n    this.type = this.$route.params.type;\r\n    console.log(this.type);\r\n    if (this.type == \"ship\")\r\n      clientServce.getPastShipReservations(JSON.parse(localStorage.user).id)\r\n          .then(response =>{\r\n            this.cottageReservationHistory = response.data;\r\n            this.listLength = this.cottageReservationHistory.length;\r\n          })\r\n    else if (this.type == \"cottage\")\r\n      clientServce.getPastCottageReservations(JSON.parse(localStorage.user).id)\r\n          .then((response) => {\r\n            this.cottageReservationHistory = response.data;\r\n            this.listLength = this.cottageReservationHistory.length;\r\n            }\r\n      );\r\n\r\n  },\r\n  methods : {\r\n    fromUntilElement(from){\r\n      this.fromElement = from;\r\n      this.forceRemounting();\r\n    },\r\n    itemReviewed(itemID){\r\n      console.log(itemID);\r\n      for (let offer of this.cottageReservationHistory){\r\n        console.log(offer);\r\n        if (offer.id == itemID){\r\n          offer.reviewed = true;\r\n        }\r\n      }\r\n    },\r\n    forceRemounting(){\r\n      this.myKey -= 1;\r\n    },\r\n    sortList(){\r\n      //axios\r\n      this.fromElement = 0;\r\n      this.forceRemounting();\r\n      console.log(document.getElementById(\"sortBy\").value);\r\n      let sortBy = document.getElementById(\"sortBy\").value;\r\n      if (sortBy == 3 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByName(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      } else if (sortBy == 1 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByDate(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 2 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByDuration(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 4 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByPrice(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 3 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByName(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      } else if (sortBy == 1 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByDate(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 2 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByDuration(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 4 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByPrice(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }\r\n    },\r\n    checkIfNeedsToBeDisplayed(index){\r\n      let untilElement = parseInt(this.numberOfElementsForDisplay) + parseInt(this.fromElement);\r\n      console.log(index);\r\n      console.log(this.fromElement);\r\n      console.log(untilElement);\r\n      if (index >= this.fromElement && index < untilElement){\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      myKey: 0,\r\n      fromElement: 0,\r\n      cottageReservationHistory: [],\r\n      numberOfElementsForDisplay: 2\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}