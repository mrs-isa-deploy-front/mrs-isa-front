{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createStaticVNode as _createStaticVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"overflow-scrolling\": \"auto\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-8\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"col-3 justify-content-right\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createStaticVNode(\"<option selected>Sortiraj po</option><option value=\\\"1\\\">Datum</option><option value=\\\"2\\\">Trajanja</option><option value=\\\"3\\\">Naziv</option><option value=\\\"4\\\">Cena</option>\", 5);\n\nconst _hoisted_10 = [_hoisted_5];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_clientHeader = _resolveComponent(\"clientHeader\");\n\n  const _component_clientReservationHistoryList = _resolveComponent(\"clientReservationHistoryList\");\n\n  const _component_pagination_component = _resolveComponent(\"pagination-component\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_clientHeader), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"select\", {\n    id: \"sortBy\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.sortList && $options.sortList(...args)),\n    class: \"form-select\",\n    \"aria-label\": \"Default select\"\n  }, _hoisted_10, 32\n  /* HYDRATE_EVENTS */\n  )])]), _createElementVNode(\"div\", null, [(_openBlock(), _createBlock(_component_clientReservationHistoryList, {\n    onReviewed: $options.itemReviewed,\n    key: $data.myKey,\n    numToDisplay: $data.numberOfElementsForDisplay,\n    from: $data.fromElement,\n    cottagesHistory: $data.cottageReservationHistory\n  }, null, 8\n  /* PROPS */\n  , [\"onReviewed\", \"numToDisplay\", \"from\", \"cottagesHistory\"]))]), _createVNode(_component_pagination_component, {\n    numberOfElementsToDisplay: $data.numberOfElementsForDisplay,\n    fromElement: $data.fromElement,\n    numberOfElements: _ctx.listLength,\n    onPagination: $options.fromUntilElement,\n    class: \"d-flex justify-content-center\"\n  }, null, 8\n  /* PROPS */\n  , [\"numberOfElementsToDisplay\", \"fromElement\", \"numberOfElements\", \"onPagination\"])]);\n}","map":{"version":3,"mappings":";;AACOA,OAAgC,EAAhC;AAAA;AAAA;;;AAGEC,OAAK,EAAC;;;gCACTC,oBACM,KADN,EACM;AADDD,OAAK,EAAC;AACL,CADN,EAAkB,IAAlB,EAAkB;AAAA;AAAlB;;;AAEKA,OAAK,EAAC;;;;;qBAEPE;;;;;;;;uBARRC,oBAyBM,KAzBN,cAyBM,CAxBJC,aAA6BC,uBAA7B,CAwBI,EAtBJJ,oBAYM,KAZN,cAYM,CAXJK,UAWI,EATJL,oBAQM,KARN,cAQM,CAPJA,oBAMS,QANT,EAMS;AANDM,MAAE,EAAC,QAMF;AANYC,YAAM,yCAAEC,+CAAF,CAMlB;AAN8BT,SAAK,EAAC,aAMpC;AANkD,kBAAW;AAM7D,GANT;;AAAA,GAOI,CARN,CASI,CAZN,CAsBI,EAPJC,oBAEM,KAFN,EAEM,IAFN,EAEM,gBADJS,aAAgNC,uCAAhN,EAAgN;AAAjLC,cAAQ,EAAEH,qBAAuK;AAAxJI,OAAG,EAAEC,WAAmJ;AAA3IC,gBAAY,EAAED,gCAA6H;AAAhGE,QAAI,EAAEF,iBAA0F;AAA5EG,mBAAe,EAAEH;AAA2D,GAAhN;;AAAA,8DACI,EAFN,CAOI,EAHJV,aAAoOc,+BAApO,EAAoO;AAA7MC,6BAAyB,EAAEL,gCAAkL;AAArJM,eAAW,EAAEN,iBAAwI;AAA1HO,oBAAgB,EAAEC,eAAwG;AAA3FC,gBAAU,EAAEd,yBAA+E;AAA7DT,SAAK,EAAC;AAAuD,GAApO;;AAAA,qFAGI,CAzBN","names":["style","class","_createElementVNode","_hoisted_5","_createElementBlock","_createVNode","_component_clientHeader","_hoisted_3","id","onChange","$options","_createBlock","_component_clientReservationHistoryList","onReviewed","key","$data","numToDisplay","from","cottagesHistory","_component_pagination_component","numberOfElementsToDisplay","fromElement","numberOfElements","_ctx","onPagination"],"sourceRoot":"","sources":["D:\\fakultet\\6.semestar\\MRS\\Projekat\\projekat-login\\projekat\\mrs-isa-front\\src\\components\\clientReservationHistory.vue"],"sourcesContent":["<template>\r\n  <div style=\"overflow-scrolling: auto\">\r\n    <clientHeader></clientHeader>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-8\">\r\n      </div>\r\n      <div class=\"col-3 justify-content-right\" >\r\n        <select id=\"sortBy\" @change=\"sortList\" class=\"form-select\" aria-label=\"Default select\">\r\n          <option selected>Sortiraj po</option>\r\n          <option value=\"1\">Datum</option>\r\n          <option value=\"2\">Trajanja</option>\r\n          <option value=\"3\">Naziv</option>\r\n          <option value=\"4\">Cena</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div>\r\n      <clientReservationHistoryList @reviewed=\"itemReviewed\" :key=\"myKey\" :numToDisplay=\"numberOfElementsForDisplay\" :from=\"fromElement\" :cottagesHistory=\"cottageReservationHistory\"> </clientReservationHistoryList>\r\n    </div>\r\n\r\n    <pagination-component :numberOfElementsToDisplay=\"numberOfElementsForDisplay\" :fromElement=\"fromElement\" :numberOfElements=\"listLength\" @pagination=\"fromUntilElement\" class=\"d-flex justify-content-center\"></pagination-component>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clientReservationHistoryList from \"@/components/clientReservationHistoryList\";\r\nimport clientHeader from \"@/components/clientHeader\";\r\nimport clientServce from \"@/servieces/ClientServce\";\r\nimport PaginationComponent from \"@/components/paginationComponent\";\r\nexport default {\r\n  name: \"clientReservationHistory\",\r\n  components:{\r\n    PaginationComponent,\r\n    clientReservationHistoryList,\r\n    clientHeader\r\n  },\r\n  props: ['option_link', 'image_path', 'text'],\r\n  created: function() {\r\n    this.fromElement = 0;\r\n    this.type = this.$route.params.type;\r\n    console.log(this.type);\r\n    if (this.type == \"ship\")\r\n      clientServce.getPastShipReservations(JSON.parse(localStorage.user).id)\r\n          .then(response =>{\r\n            this.cottageReservationHistory = response.data;\r\n            this.listLength = this.cottageReservationHistory.length;\r\n          })\r\n    else if (this.type == \"cottage\")\r\n      clientServce.getPastCottageReservations(JSON.parse(localStorage.user).id)\r\n          .then((response) => {\r\n            this.cottageReservationHistory = response.data;\r\n            this.listLength = this.cottageReservationHistory.length;\r\n            }\r\n      );\r\n\r\n  },\r\n  methods : {\r\n    fromUntilElement(from){\r\n      this.fromElement = from;\r\n      this.forceRemounting();\r\n    },\r\n    itemReviewed(itemID){\r\n      console.log(itemID);\r\n      for (let offer of this.cottageReservationHistory){\r\n        console.log(offer);\r\n        if (offer.id == itemID){\r\n          offer.reviewed = true;\r\n        }\r\n      }\r\n    },\r\n    forceRemounting(){\r\n      this.myKey -= 1;\r\n    },\r\n    sortList(){\r\n      //axios\r\n      this.fromElement = 0;\r\n      this.forceRemounting();\r\n      console.log(document.getElementById(\"sortBy\").value);\r\n      let sortBy = document.getElementById(\"sortBy\").value;\r\n      if (sortBy == 3 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByName(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      } else if (sortBy == 1 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByDate(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 2 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByDuration(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 4 && this.type == \"cottage\"){\r\n        clientServce.getSortedPastCottageReservationsByPrice(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 3 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByName(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      } else if (sortBy == 1 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByDate(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 2 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByDuration(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }else if (sortBy == 4 && this.type == \"ship\"){\r\n        clientServce.getSortedPastShipReservationsByPrice(JSON.parse(localStorage.user).id)\r\n            .then(response =>{\r\n              this.cottageReservationHistory = response.data;\r\n              this.forceRemounting();\r\n            })\r\n      }\r\n    },\r\n    checkIfNeedsToBeDisplayed(index){\r\n      let untilElement = parseInt(this.numberOfElementsForDisplay) + parseInt(this.fromElement);\r\n      console.log(index);\r\n      console.log(this.fromElement);\r\n      console.log(untilElement);\r\n      if (index >= this.fromElement && index < untilElement){\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      myKey: 0,\r\n      fromElement: 0,\r\n      cottageReservationHistory: [],\r\n      numberOfElementsForDisplay: 2\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}