{"ast":null,"code":"import changePasswordModal from \"@/components/changePasswordModal\";\nimport disabledInputField from \"@/components/disabledInputField\";\nimport deleteAccountModal from \"@/components/deleteAccountModal\";\nimport ShipOwnerService from \"@/servieces/ShipOwnerService\";\nimport shipOwnerHeader from \"@/components/shipOwnerHeader\";\nimport PasswordService from \"@/servieces/PasswordService\";\nimport OpenMaps from \"@/components/VueMaps\";\nexport default {\n  name: \"edit-profile-owner\",\n  components: {\n    changePasswordModal,\n    deleteAccountModal,\n    shipOwnerHeader,\n    OpenMaps,\n    disabledInputField\n  },\n  created: function () {\n    this.coID = JSON.parse(localStorage.user).id; //this.$route.params.id;\n\n    console.log(this.coID);\n    ShipOwnerService.getOwner(this.coID).then(response => {\n      console.log(response);\n      this.owner = response.data;\n    }).catch(function (error) {\n      console.log(error.toJSON());\n\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        // The request was made but no response was received\n        // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n        // http.ClientRequest in node.js\n        console.log(error.request);\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        console.log('Error', error.message);\n      }\n\n      console.log(error.config);\n    });\n  },\n\n  mounted() {\n    this.backup = [this.owner.name, this.owner.surname, this.owner.phoneNumber, this.owner.password, this.owner.country, this.owner.longitude, this.owner.latitude];\n  },\n\n  data() {\n    return {\n      showDialog: false,\n      buttonId: \"changePass\",\n      deleteAcc: \"deleteAcc\",\n      deleteHeader: \"Zahtev za brisanje naloga\",\n      changePassHeader: \"Promena lozinke\",\n      numLoyaltyPointsLabel: \"Broj poena\",\n      userCategoryLabel: \"Tip korisnika\",\n      emailLabel: \"Email\",\n      owner: {\n        name: \"\",\n        surname: \"\",\n        email: \"\",\n        password: \"\",\n        phoneNumber: \"\",\n        userType: \"\",\n        loyaltyPoints: \"\",\n        penaltyNumber: \"\",\n        benefits: \"\",\n        longitude: 0,\n        latitude: 0\n      },\n      passwords: {\n        old_password: \"\",\n        new_password: \"\"\n      }\n    };\n  },\n\n  methods: {\n    updateCoordinats(lon, lat) {\n      this.owner.longitude = lon;\n      this.owner.latitude = lat;\n      console.log(lon, lat);\n    },\n\n    updateProfile() {\n      ShipOwnerService.updateOwner(this.coID, this.owner).then(\"Success\");\n      this.backup[0] = this.owner.name;\n      this.backup[1] = this.owner.surname;\n      this.backup[2] = this.owner.phoneNumber;\n      this.backup[3] = this.owner.password;\n      this.backup[4] = this.owner.longitude;\n      this.backup[5] = this.owner.latitude;\n    },\n\n    cancel() {\n      this.owner.name = this.backup[0];\n      this.owner.surname = this.backup[1];\n      this.owner.phoneNumber = this.backup[2];\n      this.owner.password = this.backup[3];\n      this.owner.longitude = this.backup[4];\n      this.owner.latitude = this.backup[5];\n    },\n\n    changePassword(old_password, new_password) {\n      console.log(\"menjam lozinku\");\n      this.coID = JSON.parse(localStorage.user).id;\n      this.passwords.old_password = old_password;\n      this.passwords.new_password = new_password;\n      PasswordService.matchPassword(this.passwords, this.coID).then(response => {\n        if (response.data) {\n          document.getElementById(\"successChangePass\").style.visibility = 'visible';\n        } else {\n          document.getElementById(\"notSuccessChangePass\").style.visibility = 'visible';\n        }\n      });\n      console.log(new_password);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmFA,OAAOA,mBAAP,MAAgC,kCAAhC;AACA,OAAOC,kBAAP,MAA+B,iCAA/B;AACA,OAAOC,kBAAP,MAA+B,iCAA/B;AACA,OAAOC,gBAAP,MAA6B,8BAA7B;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,eAAe;AACbC,MAAI,EAAE,oBADO;AAEbC,YAAU,EAAC;AAACR,uBAAD;AAAsBE,sBAAtB;AAA0CE,mBAA1C;AAA0DE,YAA1D;AAAmEL;AAAnE,GAFE;AAGbQ,SAAO,EACH,YAAY;AACV,SAAKC,IAAL,GAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,IAAxB,EAA8BC,EAA1C,CADU,CACmC;;AAC7CC,WAAO,CAACC,GAAR,CAAY,KAAKP,IAAjB;AACAP,oBAAgB,CAACe,QAAjB,CAA0B,KAAKR,IAA/B,EACKS,IADL,CACWC,QAAD,IAAc;AAClBJ,aAAO,CAACC,GAAR,CAAYG,QAAZ;AACA,WAAKC,KAAL,GAAaD,QAAQ,CAACE,IAAtB;AACD,KAJL,EAKKC,KALL,CAKW,UAAUC,KAAV,EAAiB;AACtBR,aAAO,CAACC,GAAR,CAAYO,KAAK,CAACC,MAAN,EAAZ;;AACA,UAAID,KAAK,CAACJ,QAAV,EAAoB;AAClB;AACA;AACAJ,eAAO,CAACC,GAAR,CAAYO,KAAK,CAACJ,QAAN,CAAeE,IAA3B;AACAN,eAAO,CAACC,GAAR,CAAYO,KAAK,CAACJ,QAAN,CAAeM,MAA3B;AACAV,eAAO,CAACC,GAAR,CAAYO,KAAK,CAACJ,QAAN,CAAeO,OAA3B;AACF,OANA,MAMO,IAAIH,KAAK,CAACI,OAAV,EAAmB;AACxB;AACA;AACA;AACAZ,eAAO,CAACC,GAAR,CAAYO,KAAK,CAACI,OAAlB;AACF,OALO,MAKA;AACL;AACAZ,eAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBO,KAAK,CAACK,OAA3B;AACF;;AACAb,aAAO,CAACC,GAAR,CAAYO,KAAK,CAACM,MAAlB;AACD,KAvBL;AAwBD,GA/BQ;;AAgCbC,SAAO,GAAG;AACR,SAAKC,MAAL,GAAc,CAAC,KAAKX,KAAL,CAAWd,IAAZ,EAAkB,KAAKc,KAAL,CAAWY,OAA7B,EAAsC,KAAKZ,KAAL,CAAWa,WAAjD,EAA8D,KAAKb,KAAL,CAAWc,QAAzE,EACZ,KAAKd,KAAL,CAAWe,OADC,EACQ,KAAKf,KAAL,CAAWgB,SADnB,EAC8B,KAAKhB,KAAL,CAAWiB,QADzC,CAAd;AAED,GAnCY;;AAoCbhB,MAAI,GAAE;AACJ,WAAM;AACJiB,gBAAU,EAAC,KADP;AAEJC,cAAO,EAAI,YAFP;AAGJC,eAAS,EAAE,WAHP;AAIJC,kBAAY,EAAC,2BAJT;AAKJC,sBAAgB,EAAC,iBALb;AAMJC,2BAAqB,EAAC,YANlB;AAOJC,uBAAiB,EAAC,eAPd;AAQJC,gBAAU,EAAC,OARP;AASJzB,WAAK,EAAC;AACJd,YAAI,EAAE,EADF;AAEJ0B,eAAO,EAAE,EAFL;AAGJc,aAAK,EAAE,EAHH;AAIJZ,gBAAQ,EAAE,EAJN;AAKJD,mBAAW,EAAE,EALT;AAMJc,gBAAQ,EAAE,EANN;AAOJC,qBAAa,EAAE,EAPX;AAQJC,qBAAa,EAAE,EARX;AASJC,gBAAQ,EAAE,EATN;AAUJd,iBAAS,EAAE,CAVP;AAWJC,gBAAQ,EAAE;AAXN,OATF;AAsBJc,eAAS,EAAC;AACRC,oBAAY,EAAC,EADL;AAERC,oBAAY,EAAC;AAFL;AAtBN,KAAN;AA2BD,GAhEY;;AAiEbC,SAAO,EAAE;AACPC,oBAAgB,CAACC,GAAD,EAAMC,GAAN,EAAU;AACxB,WAAKrC,KAAL,CAAWgB,SAAX,GAAuBoB,GAAvB;AACA,WAAKpC,KAAL,CAAWiB,QAAX,GAAsBoB,GAAtB;AACA1C,aAAO,CAACC,GAAR,CAAYwC,GAAZ,EAAiBC,GAAjB;AACD,KALM;;AAMPC,iBAAa,GAAE;AACbxD,sBAAgB,CAACyD,WAAjB,CAA6B,KAAKlD,IAAlC,EAAuC,KAAKW,KAA5C,EAAmDF,IAAnD,CAAwD,SAAxD;AACA,WAAKa,MAAL,CAAY,CAAZ,IAAiB,KAAKX,KAAL,CAAWd,IAA5B;AACA,WAAKyB,MAAL,CAAY,CAAZ,IAAiB,KAAKX,KAAL,CAAWY,OAA5B;AACA,WAAKD,MAAL,CAAY,CAAZ,IAAiB,KAAKX,KAAL,CAAWa,WAA5B;AACA,WAAKF,MAAL,CAAY,CAAZ,IAAiB,KAAKX,KAAL,CAAWc,QAA5B;AACA,WAAKH,MAAL,CAAY,CAAZ,IAAiB,KAAKX,KAAL,CAAWgB,SAA5B;AACA,WAAKL,MAAL,CAAY,CAAZ,IAAiB,KAAKX,KAAL,CAAWiB,QAA5B;AACD,KAdM;;AAePuB,UAAM,GAAE;AACN,WAAKxC,KAAL,CAAWd,IAAX,GAAkB,KAAKyB,MAAL,CAAY,CAAZ,CAAlB;AACA,WAAKX,KAAL,CAAWY,OAAX,GAAqB,KAAKD,MAAL,CAAY,CAAZ,CAArB;AACA,WAAKX,KAAL,CAAWa,WAAX,GAAyB,KAAKF,MAAL,CAAY,CAAZ,CAAzB;AACA,WAAKX,KAAL,CAAWc,QAAX,GAAsB,KAAKH,MAAL,CAAY,CAAZ,CAAtB;AACA,WAAKX,KAAL,CAAWgB,SAAX,GAAuB,KAAKL,MAAL,CAAY,CAAZ,CAAvB;AACA,WAAKX,KAAL,CAAWiB,QAAX,GAAsB,KAAKN,MAAL,CAAY,CAAZ,CAAtB;AAED,KAvBM;;AAwBP8B,kBAAc,CAACT,YAAD,EAAeC,YAAf,EAA4B;AACxCtC,aAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAKP,IAAL,GAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,IAAxB,EAA8BC,EAA1C;AACA,WAAKqC,SAAL,CAAeC,YAAf,GAA4BA,YAA5B;AACA,WAAKD,SAAL,CAAeE,YAAf,GAA8BA,YAA9B;AACAjD,qBAAe,CAAC0D,aAAhB,CAA8B,KAAKX,SAAnC,EAA6C,KAAK1C,IAAlD,EACKS,IADL,CACWC,QAAD,IAAY;AAChB,YAAGA,QAAQ,CAACE,IAAZ,EAAiB;AACjB0C,kBAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6CC,KAA7C,CAAmDC,UAAnD,GAAgE,SAAhE;AACA,SAFA,MAGI;AACFH,kBAAQ,CAACC,cAAT,CAAwB,sBAAxB,EAAgDC,KAAhD,CAAsDC,UAAtD,GAAmE,SAAnE;AACF;AACE,OARR;AAUAnD,aAAO,CAACC,GAAR,CAAYqC,YAAZ;AACF;;AAxCO;AAjEI,CAAf","names":["changePasswordModal","disabledInputField","deleteAccountModal","ShipOwnerService","shipOwnerHeader","PasswordService","OpenMaps","name","components","created","coID","JSON","parse","localStorage","user","id","console","log","getOwner","then","response","owner","data","catch","error","toJSON","status","headers","request","message","config","mounted","backup","surname","phoneNumber","password","country","longitude","latitude","showDialog","buttonId","deleteAcc","deleteHeader","changePassHeader","numLoyaltyPointsLabel","userCategoryLabel","emailLabel","email","userType","loyaltyPoints","penaltyNumber","benefits","passwords","old_password","new_password","methods","updateCoordinats","lon","lat","updateProfile","updateOwner","cancel","changePassword","matchPassword","document","getElementById","style","visibility"],"sourceRoot":"","sources":["D:\\fakultet\\6.semestar\\MRS\\Projekat\\projekat-login\\projekat\\mrs-isa-front\\src\\components\\editProfileShipOwner.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <shipOwnerHeader></shipOwnerHeader>\r\n    <div class=\"alert alert-success alert-dismissible fade show\" id=\"successChangePass\" role=\"alert\" style=\"visibility: hidden;\">\r\n      <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\r\n      Lozinka uspesno izmenjena!\r\n    </div>\r\n    <div class=\"alert alert-danger alert-dismissible fade show\" id=\"notSuccessChangePass\" role=\"alert\" style=\"visibility: hidden;\">\r\n      <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\r\n      Lozinka nije uspesno izmenjena!\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-4  d-flex justify-content-center\" style=\" border-style: solid; border-width: medium; background-color: #CDCDCD;\">\r\n        <div>\r\n          <b>Loyality program</b><br>\r\n          <disabledInputField :label=\"numLoyaltyPointsLabel\" :info=\"owner.loyaltyPoints\"> </disabledInputField>\r\n          <disabledInputField :label=\"userCategoryLabel\" :info=\"owner.userType\"> </disabledInputField>\r\n          <label>Pogodnosti</label>\r\n          <textarea disabled class=\"my-4 text-center\" rows=\"5\" cols=\"40\" style=\"background-color: #BBC4CC;\" name=\"Pogodnosti\" :value=\"owner.benefits\">\r\n          </textarea>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div class=\"col-8 d-flex justify-content-center\" style=\"border-style: solid; border-width: medium;\r\n                                                background-color: #88BBD6;\">\r\n        <div class=\"row d-flex justify-content-center\" style=\"\">\r\n          <div class=\"col-4 d-flex justify-content-center\">\r\n            <div>\r\n\r\n              <div class=\"p-2\">\r\n                <label >Ime</label>\r\n                <br>\r\n                <input type=\"text\" ref=\"input\" v-model=\"owner.name\" size=\"25\" required>\r\n                <br>\r\n                <p id=\"nameEmpty\" v-if=\"this.owner.name == ''\" style=\"color: red;\"> Ime mora da postoji </p>\r\n                <p v-if=\"this.owner.name[0] == this.owner.name[0].toLowerCase()\" style=\"color: red;\"> Ime mora da počinje velikim slovom </p>\r\n\r\n              </div>\r\n\r\n              <div class=\"p-2\">\r\n                <label >Prezime</label>\r\n                <br>\r\n                <input type=\"text\" ref=\"input\" v-model=\"owner.surname\" size=\"25\" required>\r\n                <p v-if=\"this.owner.surname == ''\" style=\"color: red;\"> Prezime mora da postoji</p>\r\n                <p  v-if=\"this.owner.surname[0] == this.owner.surname[0].toLowerCase()\" style=\"color: red;\"> Prezime mora da počinje velikim slovom </p>\r\n              </div>\r\n\r\n\r\n              <disabled-input-field :label=\"emailLabel\" :info=\"owner.email\"> </disabled-input-field>\r\n\r\n              <div class=\"p-2\">\r\n                <label >Broj telefona</label>\r\n                <br>\r\n                <input type=\"text\" ref=\"input\" v-model=\"owner.phoneNumber\" size=\"25\" required>\r\n                <p v-if=\"this.owner.phoneNumber == ''\" style=\"color: red;\"> Broj telefona mora da postoji</p>\r\n              </div>\r\n\r\n              <div class=\"p-2\">\r\n                <changePasswordModal\r\n                    :index=\"buttonId\" :owner=\"owner\" :header=\"changePassHeader\" @input-new-password=\"changePassword\"></changePasswordModal>\r\n                <br><br>\r\n                <deleteAccountModal :index=\"deleteAcc\" :header=\"deleteHeader\" :textModal=\"text\"></deleteAccountModal>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-4 d-flex justify-content-right\">\r\n            <div>\r\n\r\n              <open-maps :lon=\"owner.longitude\" :lat=\"owner.latitude\" @coordinate-changed=\"updateCoordinats\" style=\"width: 300px; height: 300px; margin-left:30px;\"></open-maps>\r\n              <div style=\"margin-top: 20px;\">\r\n                <button type=\"button\" class=\"btn\" @click=\"cancel\" style=\"background-color:#3399FF;\">Odustani</button>\r\n                <button type=\"button\" class=\"btn\" @click=\"updateProfile\" style=\"background-color:#3399FF;\">Promeni</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport changePasswordModal from \"@/components/changePasswordModal\";\r\nimport disabledInputField from \"@/components/disabledInputField\";\r\nimport deleteAccountModal from \"@/components/deleteAccountModal\"\r\nimport ShipOwnerService from \"@/servieces/ShipOwnerService\";\r\nimport shipOwnerHeader from \"@/components/shipOwnerHeader\";\r\nimport PasswordService from \"@/servieces/PasswordService\";\r\nimport OpenMaps from \"@/components/VueMaps\";\r\nexport default {\r\n  name: \"edit-profile-owner\",\r\n  components:{changePasswordModal, deleteAccountModal, shipOwnerHeader,OpenMaps,disabledInputField},\r\n  created:\r\n      function () {\r\n        this.coID = JSON.parse(localStorage.user).id;//this.$route.params.id;\r\n        console.log(this.coID);\r\n        ShipOwnerService.getOwner(this.coID)\r\n            .then((response) => {\r\n              console.log(response);\r\n              this.owner = response.data;\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error.toJSON());\r\n              if (error.response) {\r\n                // The request was made and the server responded with a status code\r\n                // that falls out of the range of 2xx\r\n                console.log(error.response.data);\r\n                console.log(error.response.status);\r\n                console.log(error.response.headers);\r\n              } else if (error.request) {\r\n                // The request was made but no response was received\r\n                // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n                // http.ClientRequest in node.js\r\n                console.log(error.request);\r\n              } else {\r\n                // Something happened in setting up the request that triggered an Error\r\n                console.log('Error', error.message);\r\n              }\r\n              console.log(error.config);\r\n            });\r\n      },\r\n  mounted() {\r\n    this.backup = [this.owner.name, this.owner.surname, this.owner.phoneNumber, this.owner.password,\r\n      this.owner.country, this.owner.longitude, this.owner.latitude];\r\n  },\r\n  data(){\r\n    return{\r\n      showDialog:false,\r\n      buttonId : \"changePass\",\r\n      deleteAcc: \"deleteAcc\",\r\n      deleteHeader:\"Zahtev za brisanje naloga\",\r\n      changePassHeader:\"Promena lozinke\",\r\n      numLoyaltyPointsLabel:\"Broj poena\",\r\n      userCategoryLabel:\"Tip korisnika\",\r\n      emailLabel:\"Email\",\r\n      owner:{\r\n        name: \"\",\r\n        surname: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        phoneNumber: \"\",\r\n        userType: \"\",\r\n        loyaltyPoints: \"\",\r\n        penaltyNumber: \"\",\r\n        benefits: \"\",\r\n        longitude: 0,\r\n        latitude: 0\r\n      },\r\n      passwords:{\r\n        old_password:\"\",\r\n        new_password:\"\"\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    updateCoordinats(lon, lat){\r\n      this.owner.longitude = lon;\r\n      this.owner.latitude = lat;\r\n      console.log(lon, lat)\r\n    },\r\n    updateProfile(){\r\n      ShipOwnerService.updateOwner(this.coID,this.owner).then(\"Success\");\r\n      this.backup[0] = this.owner.name;\r\n      this.backup[1] = this.owner.surname;\r\n      this.backup[2] = this.owner.phoneNumber;\r\n      this.backup[3] = this.owner.password;\r\n      this.backup[4] = this.owner.longitude;\r\n      this.backup[5] = this.owner.latitude;\r\n    },\r\n    cancel(){\r\n      this.owner.name = this.backup[0];\r\n      this.owner.surname = this.backup[1];\r\n      this.owner.phoneNumber = this.backup[2];\r\n      this.owner.password = this.backup[3];\r\n      this.owner.longitude = this.backup[4];\r\n      this.owner.latitude = this.backup[5];\r\n\r\n    },\r\n    changePassword(old_password, new_password){\r\n      console.log(\"menjam lozinku\");\r\n      this.coID = JSON.parse(localStorage.user).id;\r\n      this.passwords.old_password=old_password;\r\n      this.passwords.new_password = new_password;\r\n      PasswordService.matchPassword(this.passwords,this.coID)\r\n          .then((response)=>{\r\n            if(response.data){\r\n            document.getElementById(\"successChangePass\").style.visibility = 'visible';\r\n            }\r\n            else{\r\n              document.getElementById(\"notSuccessChangePass\").style.visibility = 'visible';\r\n            }\r\n              }\r\n          )\r\n      console.log(new_password);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}